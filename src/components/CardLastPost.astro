---
import { getCollection } from "astro:content";

const posts = await getCollection('posts', ({ data }) => !data.draft);

const sortedPosts = posts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const lastPost = sortedPosts[0];
---

<style>
    .custom-top {
        margin-top: 70px;
    }

    .card {
        height: 36vh;
        background-color: transparent !important;
        background-image: linear-gradient(
            to right bottom,
            #1a1a1a,
            #222222,
            #2a2a2a,
            #323232,
            #3a3a3a
        );
    }

    .tag {
        color: #c3c3c3;
        text-transform: uppercase;
        font-weight: 700;
        line-height: 1.5;
        letter-spacing: 3.5px;
        font-size: 12px;
        text-align: center;
    }

    .card-title {
        color: #c3c3c3;
        font-weight: 700;
        letter-spacing: 1.2px;
        line-height: 1;
        text-align: center;
    }

    .card-text {
        font-weight: 600;
        letter-spacing: 1.6px;
        font-size: 12px;
        text-align: center;
    }

    .custom-button {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 126px;
        height: 32px;
        background-color: #f0f0f0;
        color: #222222;
        font-weight: 600;
        border: 1px solid transparent;
        border-radius: 60px;
        padding: 20px;
    }

    .custom-button:hover {
        background-color: #3a3a3a;
        color: #f0f0f0;
        transition: all 0.5s ease-in;
    }

</style>

{lastPost && (
  <main class="custom-top">
    <div class="card">
      <div class="card-body p-4 d-flex flex-column justify-content-center align-items-center mt-4">
        <h5 class="tag">{lastPost.data.tag}</h5>
        <h3 class="card-title">{lastPost.data.title}</h3>
        <p class="card-text">{lastPost.data.description}</p>
        <a href={`/pages/${lastPost.id}`} class="card-link custom-button">
          Leia Mais
        </a>
      </div>
    </div>
  </main>
)}
